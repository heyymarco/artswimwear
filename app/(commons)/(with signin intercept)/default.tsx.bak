'use client' // everything should be QUICKLY done in client, NOTHING to DO nor RENDER on server

// next-js:
import {
    usePathname,
}                           from 'next/navigation'

// pages:
import {
    SignInPageContent,
}                           from '@/app/(commons)/(with signin intercept)/signin/page-content'



// react components:
export default function LostParallelSlot(): JSX.Element|null {
    /*
        This page will be shown if one/more active_parallel_slots lost its active state.
        Example:
        First, when accessed `/signin/***` via interceptor, the route `(commons)/(with signin intercept)/@signin_dialog/(...)signin` activates the `signin_dialog` slot.
        Then,  when accessed `/signin/***` OUTSIDE `(commons)/(with signin intercept)/***`, the route `(commons)/(with signin intercept)/@signin_dialog/(...)signin` is no longer active (lost).
        Thus the `LostParallelSlot` will automatically be called by next-js.
    */
    
    
    
    // states:
    const pathname = usePathname();
    
    
    
    // jsx:
    if ((/^\/signin($|\/)/i).test(pathname)) {
        let tailPathname = pathname.slice('/signin'.length);
        if (tailPathname[0] === '/') tailPathname = tailPathname.slice(1);
        
        switch (tailPathname.toLowerCase()) {
            case ''        : return <SignInPageContent defaultSection='signIn' />;
            case 'signup'  : return <SignInPageContent defaultSection='signUp' />;
            case 'recover' : return <SignInPageContent defaultSection='recover' />;
        } // switch
    } // if
    
    return null;
}
